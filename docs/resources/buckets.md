---
# generated by https://github.com/hashicorp/terraform-plugin-docs
page_title: "persistent_buckets Resource - terraform-provider-persistent"
subcategory: ""
description: |-
  Persistent buckets. Provisions a number of buckets (lists) containing resources
          defined according to bucket capacity and item size. Once a bucket's capacity
          is exhausted, new buckets are created up until `maximum_buckets`. If items are
          removed, they are also removed from buckets and new items may be placed in 
          the freed space. If maximum buckets are reached, an error is raised.
---

# persistent_buckets (Resource)

Persistent buckets. Provisions a number of buckets (lists) containing resources
			defined according to bucket capacity and item size. Once a bucket's capacity
			is exhausted, new buckets are created up until `maximum_buckets`. If items are
			removed, they are also removed from buckets and new items may be placed in 
			the freed space. If maximum buckets are reached, an error is raised.

## Example Usage

```terraform
resource "persistent_buckets" "example" {
  bucket_capacity = 100
  maximum_buckets = 2
  items = {
    item-1 = {
      weight = 50
      item   = "some string data here"
    }
    item-2 = {
      weight = 25
      item   = null
    }
    item-3 = {
      weight = 10
    }
    item-4 = {
      weight = 50
    }
    item-5 = {
      weight = 10
    }
  }
}

# Result: 
# persistent_buckets.example.buckets = [
#   {  
#     item-1 = {
#  		  weight = 50
# 		  item   = "some string data here"
# 	  } 
#     item-2 = {
#   	  weight = 25
# 		  item   = null
#     } 
#     item-3 = {
# 	   	weight = 10
#	    } 
#     item-5 = {
#	  	  weight = 10
# 	  } 
#  },
# Â {
#    item-4 = {
#		   weight = 50
#	   } 
#  } 
# ]
```

<!-- schema generated by tfplugindocs -->
## Schema

### Required

- `bucket_capacity` (Number) Capacity of a single bucket.
- `items` (Attributes Map) Items that are placed in the buckets. (see [below for nested schema](#nestedatt--items))
- `maximum_buckets` (Number) Maximum number of buckets to provision.

### Optional

- `buckets` (List of Map of Object) Ordered list of filled buckets.
- `move_items` (Boolean) Allows moving items from one bucket to another (when weight of an item changes). If set to false, causes an error if an item needs moving.
- `target_capacity` (Number) Target capacity of a single bucket (fills bucket up to this capacity, allows room for items growing weight without needing to move).

### Read-Only

- `id` (String) Identifier (always fixed)

<a id="nestedatt--items"></a>
### Nested Schema for `items`

Required:

- `weight` (Number) Weight to the item in the bucket. Counts against the capacity of the bucket.

Optional:

- `item` (String) Data for the item
